(this["webpackJsonpscrypt-by-example"]=this["webpackJsonpscrypt-by-example"]||[]).push([[0],{10:function(s,a,n){s.exports={component:"Header_component__1tkkW",logo:"Header_logo__2ins2",light:"Header_light__3PSbv",dark:"Header_dark__2nvtJ",header:"Header_header__3mObx",versions:"Header_versions__eOBao",bar:"Header_bar__23jec",version:"Header_version__1QJXf"}},14:function(s,a,n){s.exports={component:"App_component__1dd61",main:"App_main__3ZkGI",footer:"App_footer__29Fsv"}},17:function(s,a,n){s.exports={component:"Example_component__mzuGC",content:"Example_content__3-AiU"}},32:function(s,a,n){},38:function(s,a,n){"use strict";n.r(a);var t=n(1),e=n(16),l=(n(32),n(12)),p=n(27),c=n(0),i={theme:"light",loading:!0},r=Object(t.createContext)({state:i,setTheme:function(s){},loadLocalStorage:function(){}});function o(){return Object(t.useContext)(r)}var h=function(s){var a=s.children,n=Object(t.useState)(i),e=Object(p.a)(n,2),o=e[0],h=e[1];function u(s){"dark"==s?(document.body.classList.remove("light"),document.body.classList.add("dark")):(document.body.classList.remove("dark"),document.body.classList.add("light"))}function j(){try{var s=localStorage.getItem("theme")||"light";u(s),h((function(a){return Object(l.a)(Object(l.a)({},a),{},{theme:s})}))}catch(a){console.error(a)}h((function(s){return Object(l.a)(Object(l.a)({},s),{},{loading:!1})}))}function d(s){u(s),h(Object(l.a)(Object(l.a)({},o),{},{theme:s})),function(s){try{localStorage.setItem("theme",s)}catch(a){console.error(a)}}(s)}return Object(c.jsx)(r.Provider,{value:Object(t.useMemo)((function(){return{state:o,loadLocalStorage:j,setTheme:d}}),[o]),children:a})},u=n(24),j=n(3),d=n(14),b=n.n(d),m=n(10),y=n.n(m),g=n.p+"static/media/scrypt.dcd88edd.png",f=n.p+"static/media/mode-light.42df9094.svg",_=n.p+"static/media/mode-dark.faf9339e.svg";var v=function(){var s=o(),a=s.state,n=s.setTheme,t=(a.theme,g);function e(s){n(s)}return Object(c.jsxs)("div",{className:y.a.component,children:[Object(c.jsx)("a",{href:"/",children:Object(c.jsx)("img",{src:t,alt:"logo",className:y.a.logo})}),Object(c.jsxs)("h3",{className:y.a.header,children:[Object(c.jsx)("a",{href:"/",children:"sCrypt by Example"}),Object(c.jsx)("div",{className:y.a.versions,children:Object(c.jsx)("div",{className:y.a.version})})]}),"dark"==a.theme?Object(c.jsx)("img",{src:f,alt:"light mode",className:y.a.light,onClick:function(s){return e("light")}}):Object(c.jsx)("img",{src:_,alt:"dark mode",className:y.a.dark,onClick:function(s){return e("dark")}})]})},x=n(5),w=n.n(x),k=n.p+"static/media/telegram.2c6478d9.png",S=n.p+"static/media/github.5994b25b.png",P=n.p+"static/media/slack.8c80a788.png",O=n.p+"static/media/medium.04b8f9d1.png";var A=function(){return Object(c.jsxs)("div",{className:w.a.component,children:[Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("img",{src:g,alt:"sCrypt",className:w.a.scrypt}),Object(c.jsx)("a",{href:"https://scrypt.io/",target:"__blank",children:"sCrypt - A High-Level Language for Bitcoin Smart Contracts."})]}),Object(c.jsxs)("div",{className:w.a.social,children:[Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("img",{src:S,alt:"github",className:w.a.github}),Object(c.jsx)("a",{href:"https://github.com/sCrypt-Inc",target:"__blank",children:"GitHub"})]}),Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("img",{src:O,alt:"medium",className:w.a.medium}),Object(c.jsx)("a",{href:"https://medium.com/@xiaohuiliu",target:"__blank",children:"Medium"})]}),Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("img",{src:P,alt:"slack",className:w.a.slack}),Object(c.jsx)("a",{href:"https://join.slack.com/t/scryptworkspace/shared_invite/enQtNzQ1OTMyNDk1ODU3LTJmYjE5MGNmNDZhYmYxZWM4ZGY2MTczM2NiNTIxYmFhNTVjNjE5MGYwY2UwNDYxMTQyNGU2NmFkNTY5MmI1MWM",target:"__blank",children:"Slack"})]}),Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("img",{src:k,alt:"telegram",className:w.a.telegram}),Object(c.jsx)("a",{href:"https://t.me/joinchat/GwaRAxKT16JjXyHt5PuhHw",target:"__blank",children:"Telegram"})]})]}),Object(c.jsx)("div",{className:w.a.row,children:Object(c.jsx)("a",{href:"mailto:contact@support@scrypt.io",children:"support@scrypt.io"})}),Object(c.jsxs)("div",{className:w.a.row,children:[Object(c.jsx)("a",{href:"https://github.com/sCrypt-Inc/scrypt-by-example.github.io",target:"__blank",children:"source"}),Object(c.jsx)("div",{className:w.a.bar,children:"|"}),Object(c.jsx)("a",{href:"https://github.com/sCrypt-Inc/scrypt-by-example.github.io/blob/gh-pages/LICENSE",target:"__blank",children:"license"})]})]})},C=n(21),T=function(s){var a=s.title,n=s.description;return Object(c.jsxs)(C.a,{children:[Object(c.jsx)("title",{children:a}),Object(c.jsx)("meta",{name:"Description",content:n})]})},E=function(s){var a=s.html;return Object(t.useEffect)((function(){if("ReactSnap"!==navigator.userAgent){document.querySelectorAll("pre").forEach((function(s){var a=document.createElement("div");a.className="buttons";var n=document.createElement("button");n.className="fa fa-copy clip-button",n.title="Copy to clipboard",n.ariaLabel="Copy to clipboard";var t=document.createElement("i");t.className="tooltiptext",n.appendChild(t),a.appendChild(n);var e=s.firstChild;s.insertBefore(a,e),n.addEventListener("click",(function(a){a.preventDefault(),function(s){var a=document.createElement("textarea");a.setAttribute("style","width:1px;border:0;opacity:0;"),document.body.appendChild(a),a.value=s.innerText,a.select(),document.execCommand("copy"),document.body.removeChild(a)}(s.childNodes[1])}))}))}}),[]),Object(c.jsx)("div",{dangerouslySetInnerHTML:{__html:a}})},H=n(17),N=n.n(H),K=function(s){var a=s.title,n=s.version,t=s.description,e=s.html;return Object(c.jsxs)("div",{className:N.a.component,children:[Object(c.jsx)(T,{title:"".concat(a," | sCrypt by Example | ").concat(n),description:t}),Object(c.jsxs)("div",{className:N.a.content,children:[Object(c.jsx)("h2",{children:a}),Object(c.jsx)(E,{html:e})]})]})};var q=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Access Modifiers",description:"Access modifiers in sCrypt",html:"<p>There are three types of access modifiers available to help restrict the scope of properties and functions of a contract:</p>\n<ul>\n<li>Default: no keyword required</li>\n<li>Private</li>\n<li>Public: only applies to functions</li>\n</ul>\n<p>Only public functions can be called externally by Bitcoin transactions.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><strong>default</strong></th>\n<th><strong>private</strong></th>\n<th><strong>public</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Same contract</td>\n<td>Yes</td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>Other conract</td>\n<td>Yes</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>Externally</td>\n<td>No</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n</tbody></table>\n"})};var L=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Array Types",description:"Array types in sCrypt",html:'<p>An array is a fixed-size list of values of the same <em>basic</em> type.</p>\n<h3 id="array-literals">Array literals</h3>\n<pre><code class="language-javascript">bool[<span class="hljs-number">3</span>] b = [<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-literal">true</span> || <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span> || (<span class="hljs-number">1</span> &gt; <span class="hljs-number">2</span>)];\nint[<span class="hljs-number">3</span>] c = [<span class="hljs-number">72</span>, -<span class="hljs-number">4</span> - <span class="hljs-number">1</span> - <span class="hljs-number">40</span>, <span class="hljs-number">833</span> * (<span class="hljs-number">99</span> + <span class="hljs-number">9901</span>) + <span class="hljs-number">8888</span>];\nbytes[<span class="hljs-number">3</span>] a = [b<span class="hljs-string">&#x27;ffee&#x27;</span>, b<span class="hljs-string">&#x27;11&#x27;</span>, b<span class="hljs-string">&#x27;22&#x27;</span>];\nint[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] d = [[<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>], [<span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]];\n</code></pre>\n<p>Array dimensions can be ommited, when declared:</p>\n<pre><code class="language-javascript">int[] e = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>];\nint[][] f = [[<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>], [<span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]];\n</code></pre>\n<h3 id="repeat-function">Repeat function</h3>\n<p>The function <code>T[size] repeat(T e, static const int size)</code> returns an array with all size elements set to <code>e</code>, where <code>T</code> can be any type. Note <code>size</code> must be a compile time constant.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// a == [0, 0, 0]</span>\nint[<span class="hljs-number">3</span>] a = <span class="hljs-title function_">repeat</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);\n\n<span class="hljs-comment">// arr2D == [[0, 0, 0], [0, 0, 0]]</span>\nint[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] arr2D = <span class="hljs-title function_">repeat</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);\n\nint[<span class="hljs-number">4</span>] flags = [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>]\nflags = <span class="hljs-title function_">repeat</span>(<span class="hljs-literal">false</span>, <span class="hljs-number">4</span>);   <span class="hljs-comment">// set all flags to be false</span>\n</code></pre>\n<h3 id="index-operator">Index operator</h3>\n<p>A variable index is allowed when reading from an array:</p>\n<pre><code class="language-javascript">int[<span class="hljs-number">3</span>] a = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>];\nint idx = <span class="hljs-number">2</span>;\nint val = a[idx];\n</code></pre>\n<p>An index value, that is out of bounds will cause contract execution to fail immeadiately.</p>\n<p>When writing to an array however, the index operator needs to be a compile-time constant:</p>\n<pre><code class="language-javascript">a[N] = <span class="hljs-number">3</span>;    <span class="hljs-comment">// N is a CTC</span>\n<span class="hljs-comment">// or</span>\na[<span class="hljs-number">1</span>] = <span class="hljs-number">3</span>;\n</code></pre>\n'})};var I=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Auction",description:"Auction in sCrypt",html:'<p>The auction contract implements two public functions:</p>\n<ul>\n<li><code>bid</code> - If a higher bid is found, the current winner is updated and the previous highest bidder is refunded.</li>\n<li><code>close</code> - The auctioneer can close the auction after it expires and take the offer.</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-comment">// Auction: highest bid before deadline wins</span>\ncontract <span class="hljs-title class_">Auction</span> {\n    @state\n    <span class="hljs-title class_">Ripemd160</span> bidder;\n\n    <span class="hljs-title class_">PubKey</span> auctioner;\n    int auctionDeadline;\n\n    <span class="hljs-comment">// bid with a higher offer</span>\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">bid</span>(<span class="hljs-params">Ripemd160 bidder, int bid, int changeSats, SigHashPreimage txPreimage</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimage</span>(txPreimage));\n\n        int highestBid = <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">value</span>(txPreimage);\n        <span class="hljs-built_in">require</span>(bid &gt; highestBid);\n\n        <span class="hljs-title class_">Ripemd160</span> highestBidder = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bidder</span>;\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bidder</span> = bidder;\n\n        <span class="hljs-comment">// auction continues with a higher bidder</span>\n        bytes stateScript = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n        bytes auctionOutput = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(stateScript, bid);\n\n        <span class="hljs-comment">// refund previous highest bidder</span>\n        bytes refundScript = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildPublicKeyHashScript</span>(highestBidder);\n        bytes refundOutput = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(refundScript, highestBid);\n\n        bytes changeScript = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildPublicKeyHashScript</span>(bidder);\n        bytes changeOutput = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(changeScript, changeSats);\n\n        bytes output = auctionOutput + refundOutput + changeOutput;\n\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(output) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n    }\n\n    <span class="hljs-comment">// withdraw after bidding is over</span>\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">Sig sig, SigHashPreimage txPreimage</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimage</span>(txPreimage));\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">nLocktime</span>(txPreimage) &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">auctionDeadline</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, <span class="hljs-variable language_">this</span>.<span class="hljs-property">auctioner</span>));\n    }\n}\n</code></pre>\n'})};var B=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Basic Types",description:"Basic types in sCrypt",html:'<p>sCrypt supports the following basic types:</p>\n<ul>\n<li><code>bool</code> - a boolean value <code>true</code> or <code>false</code>,</li>\n<li><code>int</code> - a signed integer of arbitrary length, whose literals are in decimal or hexadecimal format:<pre><code class="language-javascript">int a1 = <span class="hljs-number">42</span>;\nint a2 = -<span class="hljs-number">4242424242424242</span>;\nint a3 = <span class="hljs-number">55066263022277343669578718895168534326250603453777594175500187360389116729240</span>;\nint a4 = <span class="hljs-number">0xFF8C</span>;\nint a5 = <span class="hljs-number">0xff8c</span>;\n</code></pre>\n</li>\n<li><code>bytes</code> -  a variable length array of bytes, whose literals are in quoted hexadecimal format prefixed by <code>b</code>:<pre><code class="language-javascript">bytes b1 = b<span class="hljs-string">&#x27;ffee1234&#x27;</span>;\nbytes b2 = b<span class="hljs-string">&#x27;414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff00&#x27;</span>;\nbytes b3 = b<span class="hljs-string">&#x27;1122&#x27;</span> + b<span class="hljs-string">&#x27;eeff&#x27;</span>; <span class="hljs-comment">// b3 is b&#x27;1122eeff&#x27;</span>\n</code></pre>\n</li>\n</ul>\n<h2 id="domain-subtypes">Domain subtypes</h2>\n<p>sCrypt has several subtypes, specific to the Bitcoin context, used to further improve type safety.</p>\n<h3 id="subtypes-of-bytes">Subtypes of <code>bytes</code></h3>\n<ul>\n<li><p><code>PubKey</code> - an EC public key in compressed format (33 bytes):</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">PubKey</span> pubKey = <span class="hljs-title class_">PubKey</span>(b<span class="hljs-string">&#x27;0200112233445566778899aabbccddeeffffeeddccbbaa99887766554433221100&#x27;</span>);\n</code></pre>\n</li>\n<li><p><code>Sig</code> - an EC signature in DER format with SIGHASH flag appended at the end (0x41 - in the below example, which means <code>SIGHASH_ALL | SIGHASH_FORKID</code>):</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Sig</span> sig = <span class="hljs-title class_">Sig</span>(b<span class="hljs-string">&#x27;3045022100b71be3f1dc001e0a1ad65ed84e7a5a0bfe48325f2146ca1d677cf15e96e8b80302206d74605e8234eae3d4980fcd7b2fdc1c5b9374f0ce71dea38707fccdbd28cf7e41&#x27;</span>);\n</code></pre>\n</li>\n<li><p><code>Ripemd160</code> - a RIPEMD-160 hash type:</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Ripemd160</span> r = <span class="hljs-title class_">Ripemd160</span>(b<span class="hljs-string">&#x27;0011223344556677889999887766554433221100&#x27;</span>);\n</code></pre>\n</li>\n<li><p><code>Sha1</code> - a SHA-1 hash type:</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Sha1</span> s = <span class="hljs-title class_">Sha1</span>(b<span class="hljs-string">&#x27;0011223344556677889999887766554433221100&#x27;</span>);\n</code></pre>\n</li>\n<li><p><code>Sha256</code> - a SHA-256 hash type:</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Sha256</span> s = <span class="hljs-title class_">Sha256</span>(b<span class="hljs-string">&#x27;00112233445566778899aabbccddeeffffeeddccbbaa99887766554433221100&#x27;</span>);\n</code></pre>\n</li>\n<li><p><code>SigHashType</code> - a sighash type / flag.</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">SigHashType</span> s = <span class="hljs-title class_">SigHashType</span>(b<span class="hljs-string">&#x27;01&#x27;</span>);\n<span class="hljs-title class_">SigHashType</span> s = <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ALL</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ANYONECANPAY</span>;\n</code></pre>\n</li>\n<li><p><code>SigHashPreimage</code> - a sighash preimage.</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">SigHashPreimage</span> s = <span class="hljs-title class_">SigHashPreimage</span>(b<span class="hljs-string">&#x27;0100000028bcef7e73248aa273db19d73&#x27;</span>);\n</code></pre>\n</li>\n</ul>\n<h3 id="subtypes-of-int">Subtypes of <code>int</code></h3>\n<ul>\n<li><code>PrivKey</code> - an EC private key.<pre><code class="language-javascript"><span class="hljs-title class_">PrivKey</span> privKey = <span class="hljs-title class_">PrivKey</span>(<span class="hljs-number">0x00112233445566778899aabbccddeeffffeeddccbbaa99887766554433221100</span>);\n</code></pre>\n</li>\n</ul>\n'})};var D=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Code Seperator",description:"Code seperator in sCrypt",html:'<p>Three or more consecutive <code>*</code> in a line insert an <a href="https://wiki.bitcoinsv.io/index.php/OP_CODESEPARATOR">OP_CODESEPARATOR</a>. It is used to exclude what comes before (and including itself) it from being part of the signature.</p>\n<pre><code class="language-javascript">contract <span class="hljs-variable constant_">P2PKH_OCS</span> {\n    <span class="hljs-title class_">Ripemd160</span> pubKeyHash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">Sig sig, PubKey pubKey</span>) {\n        <span class="hljs-comment">// code separator 1</span>\n        ***\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash160</span>(pubKey) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">pubKeyHash</span>);\n        <span class="hljs-comment">// code separator 2</span>\n        *****\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, pubKey));\n    }\n}\n</code></pre>\n'})};var R=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Fair Coin Toss",description:"Fair coin toss in sCrypt",html:'<p>Alice and Bob decide to flip a coin, but they have no physical coin or they want to do it over the Internet. They can achieve fair coin tossing by following protocol on Bitcoin.</p>\n<ol>\n<li>Alice and Bob each locks X bitcoins in a smart contract shown below.</li>\n<li>They both reveal their secret number, which are XOR\u2019d to determine if the coins lands on head or tail. Alice wins if it is head, otherwise Bob wins. Whoever wins takes all 2X bitcoins.</li>\n</ol>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">CoinToss</span> {\n\n    <span class="hljs-title class_">PubKey</span> alice;\n    <span class="hljs-title class_">PubKey</span> bob;\n    <span class="hljs-comment">// commitments</span>\n    <span class="hljs-title class_">Sha256</span> aliceHash;\n    <span class="hljs-title class_">Sha256</span> bobHash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">toss</span>(<span class="hljs-params">bytes aliceNonce, bytes bobNonce, Sig sig</span>) {\n        <span class="hljs-comment">// nonce can be of any length, as long as it&#x27;s resistant from brute-force attack</span>\n        <span class="hljs-comment">// We use 256 bits / 32 bytes as an example here</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">len</span>(aliceNonce) == <span class="hljs-number">32</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(aliceNonce) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">aliceHash</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">len</span>(bobNonce) == <span class="hljs-number">32</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(bobNonce) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">bobHash</span>);\n        \n        <span class="hljs-comment">// last bit of XOR</span>\n        bytes head = (aliceNonce ^ bobNonce) &amp; b<span class="hljs-string">&#x27;0000000000000000000000000000000000000000000000000000000000000001&#x27;</span>;\n\n        <span class="hljs-comment">// head -&gt; Alice wins; tail -&gt; Bob wins</span>\n        <span class="hljs-title class_">PubKey</span> winner = head ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">alice</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">bob</span>;\n\n        <span class="hljs-comment">// winner takes all</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, winner));\n    }\n\n}\n</code></pre>\n'})};var F=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Const Variables",description:"Const variables in sCrypt",html:'<p>Variables declared const cannot be changed once initialized.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Test</span> {\n    <span class="hljs-keyword">const</span> int x;\n\n    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">int x</span>) {\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x; <span class="hljs-comment">// good, since this is initialization</span>\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> int y</span>) {\n        y = <span class="hljs-number">1</span>; <span class="hljs-comment">// &lt;-- error</span>\n\n        <span class="hljs-keyword">const</span> int a = <span class="hljs-number">36</span>;\n        a = <span class="hljs-number">11</span>; <span class="hljs-comment">// &lt;-- error</span>\n\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n}\n</code></pre>\n'})};var z=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Constructor",description:"Constructors in sCrypt",html:'<p>We can define a constructor in order to store variables in a contract (locking script).</p>\n<p>The constructor can be defined implicitly:</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Test</span> {\n    int x1;\n    bytes x2;\n    bool x3;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">int y</span>) {...}\n}\n</code></pre>\n<p>or explicitly:</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Test</span> {\n    int x1;\n    bytes x2;\n    bool x3;\n\n    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">int x1, bytes x2, bool x3</span>) {\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x1</span> = x1;\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x2</span> = x2;\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x3</span> = x3;\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">int y</span>) {...}\n}\n</code></pre>\n<p>Both examples are functionally equivalent.</p>\n'})};var G=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Functions",description:"Functions in sCrypt",html:'<p>sCrypt enables developers to define their own functions as exemplified below:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">int a, int b</span>): int {\n    <span class="hljs-keyword">return</span> a + b;\n}\n</code></pre>\n<p>They are only visible within the contract, similar to <code>private</code> functions in Solidity.</p>\n<p>Every function must end with a <code>return</code> statement. Recursion is disallowed. A function cannot call itself in its body, either directly or indirectly.</p>\n'})};var U=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"ECDSA-based Oracles",description:"ECDSA-based oracles in sCrypt",html:'<p><strong>P</strong> and <strong>p</strong> denote an oracle\u2019s public and private key, respectively. We first hash the data to be signed. The result is added with <strong>p</strong>, yielding a new private key <strong>p\u2019</strong>.</p>\n<blockquote>\n<p>x = sha256(data)\np\u2019 = p + x</p>\n</blockquote>\n<p>The corresponding public key, <strong>P\u2019</strong>, can be derived as follows:</p>\n<blockquote>\n<p>P\u2019 = p\u2019 * G = (p + x) * G = P + x * G</p>\n</blockquote>\n<p>The oracle uses the derived private key <strong>p\u2019</strong> to sign, instead of the original <strong>p</strong>. Since only the oracle knows <strong>p</strong>, only he knows <strong>p\u2019</strong> and can use it to sign against <strong>P\u2019</strong>. To calculate <strong>P\u2019</strong> in a contract, we need to calculate <strong>X = x * G</strong> and then add the result with <strong>P</strong>.</p>\n<p>In order to verify the correct public key sum efficiently, we also pass <strong>lambda</strong>, which is the gradient between <strong>P</strong> and <strong>X</strong>:</p>\n<blockquote>\n<p>n - secp256k1 curve order (often also denoted as p)</p>\n</blockquote>\n<blockquote>\n<p>lambda = ((Xy - Py) / (Xx - Px)) % n</p>\n</blockquote>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"ec.scrypt"</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">"util.scrypt"</span>;\n\n\nlibrary <span class="hljs-title class_">Oracle</span> {\n\n    <span class="hljs-comment">// Verify data is signed by the oracle with given public key.</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyData</span>(<span class="hljs-params">bytes data, \n                               Sig sig,\n                               PubKey P,\n                               PubKey derP,\n                               PubKey X,\n                               int lambda,\n                               SigHashPreimage txPreimage</span>) : bool {\n        <span class="hljs-comment">// sha256 data</span>\n        bytes hash = <span class="hljs-title function_">sha256</span>(data);\n\n        <span class="hljs-title class_">PrivKey</span> x = <span class="hljs-title class_">PrivKey</span>(<span class="hljs-title class_">Util</span>.<span class="hljs-title function_">fromLEUnsigned</span>(hash));\n\n        <span class="hljs-comment">// verify X = x * G?</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimageAdvanced</span>(txPreimage, x, X, <span class="hljs-title class_">Util</span>.<span class="hljs-property">invK</span>, <span class="hljs-title class_">Util</span>.<span class="hljs-property">r</span>, <span class="hljs-title class_">Util</span>.<span class="hljs-property">rBigEndian</span>, <span class="hljs-title class_">SigHashType</span>(<span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ALL</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">FORKID</span>)));\n\n        <span class="hljs-comment">// verify P&#x27; = P + X</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isPubKeySum</span>(P, X, lambda, derP));\n\n        <span class="hljs-comment">// verify signature is from oracle, who knows p&#x27; = p + x</span>\n        <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkSig</span>(sig, derP);\n\n    }\n\n}\n</code></pre>\n'})};var M=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Exit Function",description:"Exit function in sCrypt",html:'<p><code>exit(bool status)</code> terminates contract execution. If status is <code>true</code>, the contract succeeds; otherwise, it fails.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">TestPositiveEqual</span> {\n    int x;\n\n    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">int x</span>) {\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-keyword">if</span> (y &lt;= <span class="hljs-number">0</span>) {\n          <span class="hljs-title function_">exit</span>(<span class="hljs-literal">true</span>);\n        }\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n}\n</code></pre>\n'})};var X=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Generic Types",description:"Generic types in sCrypt",html:'<p>A generic type is a parameterized type. It allows a library to work over a variety of types rather than a single one. Users can consume these libraries and use their own concrete types.</p>\n<p>Generic types can only be declared at library level and used within the library\u2019s scope.</p>\n<pre><code class="language-javascript">library <span class="hljs-title class_">HashedMap</span>&lt;K, V&gt; {\n\n  <span class="hljs-keyword">function</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">K k, V v, int idx</span>) {\n    ...\n  }\n\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">HashedMap</span>&lt;bytes, int&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashedMap</span>();\nmap.<span class="hljs-title function_">set</span>(b<span class="hljs-string">&#x27;01&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);\n</code></pre>\n'})};var Y=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Conway's Game of Life",description:"Conway's Game of Life in sCrypt",html:'<p>Rules:</p>\n<ol>\n<li>Any live cell with fewer than two live neighbours dies, as if by needs caused by underpopulation.</li>\n<li>Any live cell with more than three live neighbours dies, as if by overcrowding.</li>\n<li>Any live cell with two or three live neighbours lives, unchanged, to the next generation.</li>\n<li>Any dead cell with exactly three live neighbours cells will come to life.</li>\n</ol>\n<p>The generation of the game is stored as the <a href="https://by-example.scrypt.io/stateful-contract/">state</a> of the contract.</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"arrayUtil.scrypt"</span>;\n\n\n<span class="hljs-comment">// Conway Game Of Life on a board of N * N</span>\ncontract <span class="hljs-title class_">GameOfLife</span> {\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int N = <span class="hljs-number">5</span>;\n    <span class="hljs-comment">// effctively we play on a grid of (N+2) * (N+2) without handling boundary cells</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-variable constant_">BOARD_SIZE</span> = <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-property">N</span> + <span class="hljs-number">2</span>;\n    <span class="hljs-keyword">static</span> bytes <span class="hljs-variable constant_">LIVE</span> = b<span class="hljs-string">&#x27;01&#x27;</span>;\n    <span class="hljs-keyword">static</span> bytes <span class="hljs-variable constant_">DEAD</span> = b<span class="hljs-string">&#x27;00&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-variable constant_">LOOP_NEIGHBORS</span> = <span class="hljs-number">3</span>;\n\n    @state\n    bytes board;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">play</span>(<span class="hljs-params">int amount, SigHashPreimage txPreimage</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimage</span>(txPreimage));\n\n        <span class="hljs-comment">// make the move</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span> = <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-title function_">evolve</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span>);\n\n        <span class="hljs-comment">// update state: next turn &amp; next board</span>\n        bytes scriptCode_ = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n        bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(scriptCode_, amount);\n        bytes outputs = output;\n\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(outputs) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n    }\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">evolve</span>(<span class="hljs-params">bytes oldBoard</span>) : bytes {\n        bytes newBoard = oldBoard;\n\n        int i = <span class="hljs-number">1</span>;\n        loop (<span class="hljs-title class_">GameOfLife</span>.<span class="hljs-property">N</span>) {\n            int j = <span class="hljs-number">1</span>;\n            loop (<span class="hljs-title class_">GameOfLife</span>.<span class="hljs-property">N</span>) {\n                bytes nextState = <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-title function_">next</span>(oldBoard, i, j);\n                newBoard = <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">setElemAt</span>(newBoard, <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-title function_">index</span>(i, j), nextState);\n\n                j++;\n            }\n\n            i++;\n        }\n\n        <span class="hljs-keyword">return</span> newBoard;\n    }\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">next</span>(<span class="hljs-params">bytes oldBoard, int row, int col</span>) : bytes {\n        <span class="hljs-comment">// number of neighbors alive</span>\n        int alive = <span class="hljs-number">0</span>;\n\n        int i = -<span class="hljs-number">1</span>;\n        loop (<span class="hljs-variable constant_">LOOP_NEIGHBORS</span>) {\n            int j = -<span class="hljs-number">1</span>;\n\n            loop (<span class="hljs-variable constant_">LOOP_NEIGHBORS</span>) {\n                <span class="hljs-keyword">if</span> (!(i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>)) {\n                    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">getElemAt</span>(oldBoard, <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-title function_">index</span>(row + i, col + j))) {\n                        alive++;\n                    }\n                }\n                j++;\n            }\n\n            i++;\n        }\n\n        bytes oldState = <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">getElemAt</span>(oldBoard, <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-title function_">index</span>(row, col));\n        <span class="hljs-comment">/* rule\n        1. Any live cell with two or three live neighbours survives.\n        2. Any dead cell with three live neighbours becomes a live cell.\n        3. All other live cells die in the next generation. Similarly, all other dead cells stay dead.\n        */</span>\n        <span class="hljs-keyword">return</span> (alive == <span class="hljs-number">3</span> || alive == <span class="hljs-number">2</span> &amp;&amp; oldState == <span class="hljs-variable constant_">LIVE</span>) ? <span class="hljs-variable constant_">LIVE</span> : <span class="hljs-variable constant_">DEAD</span>;\n    }\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">int i, int j</span>) : int {\n        <span class="hljs-keyword">return</span> i * <span class="hljs-title class_">GameOfLife</span>.<span class="hljs-property">BOARD_SIZE</span> + j;\n    }\n}\n</code></pre>\n'})};var V=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Hello World",description:"Hello world in sCrypt",html:'<p>The following is a simple contract written in sCrypt. It takes an integer <code>x</code> as a parameter for the constructor.\nIt exposes a single public function <code>equals</code>, which checks if the passed parameter is equal to <code>x</code>.\nOn a lower level this means, that we need to include an integer <code>y</code> in the unlocking script, that unlocks the output containing our smart contract (which stores <code>x</code>).</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">HelloWorld</span> {\n    int x;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equals</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n}\n</code></pre>\n'})};var W=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"If / Else",description:"If / else statement in sCrypt",html:'<p>An <code>if</code> statement can take a value of <code>bool</code>, <code>\xecnt</code> or <code>bytes</code>. An <code>int</code> value is interpreted to be <code>false</code> if and only if it equals <code>0</code>. A <code>bytes</code> value is interpreted as <code>false</code> if and only if every byte of its value equals <code>b&#39;00&#39;</code>. That includes empty <code>bytes</code> (<code>b&#39;&#39;</code>).</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// Can be either:</span>\nbool cond = <span class="hljs-literal">true</span>;\n<span class="hljs-comment">// or:</span>\nbytes cond = b<span class="hljs-string">&#x27;01&#x27;</span>;\n<span class="hljs-comment">// or:</span>\nint cond = <span class="hljs-number">1</span>;\n\n<span class="hljs-keyword">if</span> (cond) {\n    ...\n} <span class="hljs-keyword">else</span> {\n    ...\n}\n</code></pre>\n'})};var Z=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Import",description:"Import statement in sCrypt",html:'<p>If we don&#39;t wan&#39;t to store multiple contracts, properties or libraries in the same file, we can split them up into many and use the <code>import</code> statement.</p>\n<p><em>hashPuzzle.scrypt</em>:</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">HashPuzzle</span> {\n    <span class="hljs-title class_">Ripemd160</span> hash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">spend</span>(<span class="hljs-params">bytes preimage</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash160</span>(preimage) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">hash</span>);\n    }\n}\n</code></pre>\n<p><em>p2pk.scrypt</em>:</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Pay2PubKey</span> {\n    <span class="hljs-title class_">PubKey</span> pubKey;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">spend</span>(<span class="hljs-params">Sig sig</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, <span class="hljs-variable language_">this</span>.<span class="hljs-property">pubKey</span>));\n    }\n}\n</code></pre>\n<p><em>p2pkh.scrypt</em>:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"./hashPuzzle.scrypt"</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">"./p2pk.scrypt"</span>;\n\ncontract <span class="hljs-title class_">Pay2PubKeyHash</span> {\n    <span class="hljs-title class_">Ripemd160</span> pubKeyHash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">spend</span>(<span class="hljs-params">Sig sig, PubKey pubKey</span>) {\n        <span class="hljs-title class_">HashPuzzle</span> hp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashPuzzle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pubKeyHash</span>);\n        <span class="hljs-built_in">require</span>(hp.<span class="hljs-title function_">spend</span>(pubKey));\n\n        <span class="hljs-title class_">Pay2PubKey</span> p2pk = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pay2PubKey</span>(pubKey);\n        <span class="hljs-built_in">require</span>(p2pk.<span class="hljs-title function_">spend</span>(sig));\n    }\n}\n</code></pre>\n<p><a href="https://scryptdoc.readthedocs.io/en/latest/contracts.html?highlight=import#id1">Standard libraries</a> don&#39;t need to be imported explicitly.</p>\n'})};var J=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Inline Assembly",description:"Inline assembly in sCrypt",html:'<p>Script can be embedded directly into sCrypt source code using assembly representation. An sCrypt function can be written in Script and called like a regular sCrypt function.</p>\n<p>For a function to be written in Script, its entire body must be enclosed by an <code>asm</code> block. Function parameters are on top of the stack, in reverse order as declared.</p>\n<p>An example that emulates the behaviour of a regular P2PKH is shown below:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">p2pkh</span>(<span class="hljs-params">Sig sig, PubKey pubKey</span>): bool {\n    asm {\n        op_dup\n        op_hash160\n        $pkh\n        op_equalverify\n        op_checksig\n    }\n}\n</code></pre>\n'})};var Q=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Library",description:"Libraries in sCrypt",html:'<p>A library is the same with a contract, except it does not contain any public function. It is only intended to be imported by a contract or other libraries. It thus cannot be independently deployed and called. It is frequently used to group related constants and static functions.</p>\n<pre><code class="language-javascript">library <span class="hljs-title class_">Util</span> {\n    <span class="hljs-comment">// number of bytes to denote some numeric value</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-title class_">DataLen</span> = <span class="hljs-number">1</span>;\n    <span class="hljs-comment">// number of bytes to denote length serialized state, including varint prefix (1 byte) + length (2 bytes), change length to 4 when you need PushData4</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-title class_">StateLen</span> = <span class="hljs-number">3</span>;\n\n    <span class="hljs-comment">// convert signed integer "n" to unsigned integer of "l" bytes, in little endian</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">toLEUnsigned</span>(<span class="hljs-params">int n, int l</span>): bytes {\n        <span class="hljs-comment">// one extra byte to accommodate possible negative sign byte</span>\n        bytes m = <span class="hljs-title function_">num2bin</span>(n, l + <span class="hljs-number">1</span>);\n        <span class="hljs-comment">// remove sign byte</span>\n        <span class="hljs-keyword">return</span> m[<span class="hljs-number">0</span> : <span class="hljs-title function_">len</span>(m) - <span class="hljs-number">1</span>];\n    }\n}\n</code></pre>\n'})};var $=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Loops",description:"Loops in sCrypt",html:'<p>sCrypt allows looping by repeating the loop body a specified number of times. For example, the loop</p>\n<pre><code class="language-javascript">loop (<span class="hljs-number">10</span>) {\n    x = x * <span class="hljs-number">2</span>;\n}\n</code></pre>\n<p>gets unrolled to</p>\n<pre><code class="language-javascript">x = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\nx = x * <span class="hljs-number">2</span>;\n</code></pre>\n<p>Because loop unrolling is done at compile time, the loop count must be a compile time constant.</p>\n<p>We can also access the loop index by defining an induction variable:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// int[3][4] matrix;</span>\nloop (<span class="hljs-number">3</span>) : i {\n    loop (<span class="hljs-number">4</span>) : j {\n        matrix[i][j] = i + j;\n    }\n}\n</code></pre>\n<p>Loops in sCrypt do not support a break statement, but we can simulate one using conditionals:</p>\n<pre><code class="language-javascript">bool done = <span class="hljs-literal">false</span>;\nloop (<span class="hljs-number">3</span>) {\n    <span class="hljs-keyword">if</span> (!done) {\n        x = x * <span class="hljs-number">2</span>;\n        <span class="hljs-keyword">if</span> (x &gt;= <span class="hljs-number">8</span>) {\n            done = <span class="hljs-literal">true</span>;\n        }\n    }\n}\n</code></pre>\n'})};var ss=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Multiparty Hash Puzzles",description:"Multiparty hash puzzles in sCrypt",html:'<p>In a hash puzzle contract, the spender has to provide a preimage <code>x</code> that hashes to a predefined value <code>y</code> to unlock a UTXO. It can be\nextended to multiple parties so that multiple preimages have to be provided such that <code>y1 = H(x1)</code>, <code>y2 = H(x2)</code>, ..., <code>yN = H(xN)</code>. Below shows an examples of three parties.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">MultiPartyHashPuzzles</span> {\n    <span class="hljs-title class_">Sha256</span> hash1;   <span class="hljs-comment">// hash1 = b&#x27;136523B9FEA2B7321817B28E254A81A683D319D715CEE2360D051360A272DD4C&#x27;</span>\n    <span class="hljs-title class_">Sha256</span> hash2;   <span class="hljs-comment">// hash2 = b&#x27;E222E30CF5C982E5F6251D755B0B16F608ACE631EB3BA9BDAF624FF1651ABF98&#x27;</span>\n    <span class="hljs-title class_">Sha256</span> hash3;   <span class="hljs-comment">// hash3 = b&#x27;2A79F5D9F8B3770A59F91E0E9B4C379F7C7A32353AA6450065E43A8616EF5722&#x27;</span>\n    \n    <span class="hljs-comment">// preimage1: e.g., "bsv" -&gt; b&#x27;627376&#x27;</span>\n    <span class="hljs-comment">// preimage2: e.g., "sCrypt" -&gt; b&#x27;734372797074&#x27;</span>\n    <span class="hljs-comment">// preimage3: e.g., "IDE" -&gt; b&#x27;494445&#x27;</span>\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">bytes preimage1, bytes preimage2, bytes preimage3</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">sha256</span>(preimage1) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">hash1</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">sha256</span>(preimage2) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">hash2</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">sha256</span>(preimage3) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">hash3</span>);\n    }\n}\n</code></pre>\n<p>The above solution is problematic when <code>N</code> is large since all <code>N</code> hashes have to be included in the locking script, bloating the transaction. \nInstead, we can combine all <code>y</code>&#39;s into a single y such that <code>y = H(H(y1 || y2) || y3)</code> as shown below.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">MultiPartyHashPuzzlesCompact</span> {\n    <span class="hljs-comment">// only 1 hash needs to go into the locking script, saving space</span>\n    <span class="hljs-title class_">Sha256</span> combinedHash; <span class="hljs-comment">// combinedHash = b&#x27;C9392767AB23CEFF09D207B9223C0C26F01A7F81F8C187A821A4266F8020064D&#x27;</span>\n\n    <span class="hljs-comment">// preimage1: e.g., "bsv" -&gt; b&#x27;627376&#x27;</span>\n    <span class="hljs-comment">// preimage2: e.g., "sCrypt" -&gt; b&#x27;734372797074&#x27;</span>\n    <span class="hljs-comment">// preimage3: e.g., "IDE" -&gt; b&#x27;494445&#x27;</span>\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">bytes preimage1, bytes preimage2, bytes preimage3</span>) {\n        <span class="hljs-title class_">Sha256</span> hash1 = <span class="hljs-title function_">sha256</span>(preimage1);\n        <span class="hljs-title class_">Sha256</span> hash2 = <span class="hljs-title function_">sha256</span>(preimage2);\n        <span class="hljs-title class_">Sha256</span> hash3 = <span class="hljs-title function_">sha256</span>(preimage3);\n        <span class="hljs-title class_">Sha256</span> hash12 = <span class="hljs-title function_">sha256</span>(hash1 + hash2);\n        <span class="hljs-title class_">Sha256</span> hash123 = <span class="hljs-title function_">sha256</span>(hash12 + hash3);\n\n        <span class="hljs-built_in">require</span>(hash123 == <span class="hljs-variable language_">this</span>.<span class="hljs-property">combinedHash</span>);\n    }\n}\n</code></pre>\n'})};var as=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Operators",description:"Operators in sCrypt",html:'<table>\n<thead>\n<tr>\n<th><strong>Precedence</strong></th>\n<th><strong>Operators</strong></th>\n<th><strong>Associativity</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td><code>- ! ~</code></td>\n<td>right</td>\n</tr>\n<tr>\n<td>2</td>\n<td><code>* / %</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>3</td>\n<td><code>+ -</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>4</td>\n<td><code>&lt;&lt; &gt;&gt;</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>5</td>\n<td><code>&lt; &lt;= &gt; &gt;=</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>6</td>\n<td><code>== !=</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>7</td>\n<td><code>&amp;</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>8</td>\n<td><code>^</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>9</td>\n<td><code>|</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>10</td>\n<td><code>&amp;&amp;</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>11</td>\n<td><code>||</code></td>\n<td>left</td>\n</tr>\n<tr>\n<td>12</td>\n<td><code>? :</code></td>\n<td>right</td>\n</tr>\n</tbody></table>\n<p>Operators <code>&amp;&amp;</code>, <code>||</code>, and <code>? :</code> use <a href="https://en.wikipedia.org/wiki/Short-circuit_evaluation">short-circuit evaluation</a>.</p>\n'})};var ns=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"P2PKH",description:"Pay to Public Key Hash (P2PKH) in sCrypt",html:'<p>Pay-to-PubKey-Hash (<a href="https://learnmeabitcoin.com/guide/p2pkh">P2PKH</a>) contract is used to send bitcoins to a bitcoin address. It is the most common contract on the Bitcoin network. Such contracts are unlocked by the public key and a signature created by the corresponding private key.</p>\n<pre><code class="language-javascript">contract <span class="hljs-variable constant_">P2PKH</span> {\n    <span class="hljs-title class_">Ripemd160</span> pubKeyHash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">Sig sig, PubKey pubKey</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash160</span>(pubKey) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">pubKeyHash</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, pubKey));\n    }\n}\n</code></pre>\n'})};var ts=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Public Function",description:"Public functions in sCrypt",html:'<p>A public function is a function, that get&#39;s invoked by an unlocking script. The body of the function corresponds to the locking script of the contract and the functions arguments to the unlocking script. A contract must have at least one public function.</p>\n<p>Public functions don&#39;t return any value and must end with a call to <code>require()</code>. If all calls to <code>require()</code> inside the function evaluate as true, then the contract can be redeemed.</p>\n<p>A public function can be regarded as a mathematical boolean function. <code>f</code> is the function body and <code>x</code> the function arguments. A contract call succeeds if and only if <code>f(x)</code> returns true.</p>\n<h2 id="multiple-public-functions">Multiple Public Functions</h2>\n<p>A contract can have multiple public functions, representing different ways to fulfill a contract. Only one of the public functions can be called at a time. In this case, the last operator of  the unlocking script has to be the index of the public function called, starting from <code>0</code>. For example, if public function <code>larger</code> is called, unlocking script of <code>y 2</code> can fulfill the contract below, in which 2 is the public function index.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Test</span> {\n    int x;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">smaller</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">larger</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n}\n</code></pre>\n'})};var es=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"R-Puzzle",description:"R-Puzzle contract in sCrypt",html:'<p>In a <a href="https://wiki.bitcoinsv.io/index.php/R-Puzzles">R-Puzzle</a>, an ephemeral key <code>k</code> is never revealed. Instead <code>r</code>, which is the x-coordinate of its corresponding public key, is revealed and from <code>r</code> along with the signature, the knowledge of <code>k</code> can be proven using <code>checkSig()</code>.</p>\n<pre><code class="language-javascript">contract RPuzzle {\n    <span class="hljs-title class_">Ripemd160</span> rhash;\n\n    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">Ripemd160 rhash</span>) {\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">rhash</span> = rhash;\n    }\n\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSigR</span>(<span class="hljs-params">Sig sigr</span>): bytes {\n        bytes lenBytes = sigr[<span class="hljs-number">3</span>:<span class="hljs-number">4</span>];\n        int len = <span class="hljs-title function_">unpack</span>(lenBytes);\n        bytes r = sigr[<span class="hljs-number">4</span>:<span class="hljs-number">4</span>+len];\n        <span class="hljs-keyword">return</span> r;\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">Sig sig, PubKey pubKey, Sig sigr</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rhash</span> == <span class="hljs-title function_">hash160</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getSigR</span>(sigr)));\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sigr, pubKey));\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, pubKey));\n    }\n}\n</code></pre>\n'})};var ls=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Rabin Signatures",description:"Rabin signatures in sCrypt",html:'<p>A <a href="https://en.wikipedia.org/wiki/Rabin_signature_algorithm">Rabin signature</a> is an alternative form of digital signature to ECDSA used in Bitcoin. It allows for efficient on-chain signature verification and is often used for signing and verifying oracle data.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">RabinSignature</span> {\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifySig</span>(<span class="hljs-params">int sig, bytes msg, bytes padding, int n</span>) {\n        int h = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fromLEUnsigned</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(msg + padding));\n        <span class="hljs-built_in">require</span>((sig * sig) % n == h % n);\n    }\n\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">hash</span>(<span class="hljs-params">bytes x</span>): bytes {\n        <span class="hljs-comment">// expand into 512 bit hash</span>\n        bytes hx = <span class="hljs-title function_">sha256</span>(x);\n        int idx = <span class="hljs-title function_">len</span>(hx) / <span class="hljs-number">2</span>;\n        <span class="hljs-keyword">return</span> <span class="hljs-title function_">sha256</span>(hx[:idx]) + <span class="hljs-title function_">sha256</span>(hx[<span class="hljs-attr">idx</span>:]);\n    }\n\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fromLEUnsigned</span>(<span class="hljs-params">bytes b</span>): int {\n        <span class="hljs-comment">// append positive sign byte. This does not hurt even when sign bit is already positive</span>\n        <span class="hljs-keyword">return</span> <span class="hljs-title function_">unpack</span>(b + b<span class="hljs-string">&#x27;00&#x27;</span>);\n    }\n\n}\n</code></pre>\n'})};var ps=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Require",description:"Require function in sCrypt",html:'<p>The <code>require()</code> function specifies terms/conditions of a contract. It consumes a boolean condition. If the condition is not met, the contract will abort execution and fail. Otherwise, the execution will resume.</p>\n<p>Every public function must end with a <code>require()</code> call.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Test</span> {\n    int x;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>);\n    }\n}\n</code></pre>\n'})};var cs=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Rule 110",description:"Rule 110 in sCrypt",html:'<p>The Rule 110 cellular automaton is a 1-dimensional elementary CA, where a linear pattern of 0s and 1s evolves according to a simple set of rules. Whether a point in the pattern will be 0 or 1 in the new generation depends on its current value and on those of its two neighbors. The Rule 110 has the following set of rules:</p>\n<table>\n<thead>\n<tr>\n<th>Current pattern</th>\n<th>111</th>\n<th>110</th>\n<th>101</th>\n<th>100</th>\n<th>011</th>\n<th>010</th>\n<th>001</th>\n<th>000</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>New state for center cell</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n</tr>\n</tbody></table>\n<pre><code class="language-javascript">contract rule110 {\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int N = <span class="hljs-number">5</span>; <span class="hljs-comment">//size of board</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-variable constant_">N2</span> = <span class="hljs-number">3</span>; <span class="hljs-comment">//size of board</span>\n    <span class="hljs-keyword">static</span> bytes <span class="hljs-variable constant_">LIVE</span> = b<span class="hljs-string">&#x27;01&#x27;</span>;\n    <span class="hljs-keyword">static</span> bytes <span class="hljs-variable constant_">DEAD</span> = b<span class="hljs-string">&#x27;00&#x27;</span>;\n\n    @state\n    bytes board;\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">play</span>(<span class="hljs-params">int amount, SigHashPreimage txPreimage</span>) {\n        <span class="hljs-title class_">SigHashType</span> sigHashType = <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ANYONECANPAY</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">SINGLE</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">FORKID</span>;\n        <span class="hljs-comment">// this ensures the preimage is for the current tx</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimageSigHashType</span>(txPreimage, sigHashType));\n\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeNewBoard</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span>);\n\n        bytes newScriptCode = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n        bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(newScriptCode, amount);\n\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(output) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n    }\n\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeNewBoard</span>(<span class="hljs-params">bytes board</span>) : bytes {\n        bytes res = b<span class="hljs-string">&#x27;&#x27;</span>;\n        res += <span class="hljs-variable constant_">DEAD</span>;\n        loop (<span class="hljs-variable constant_">N2</span>) : i {\n            res += <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">newState</span>(board[i : i + <span class="hljs-number">3</span>]);\n        }\n        res += <span class="hljs-variable constant_">DEAD</span>;\n        <span class="hljs-keyword">return</span> res;\n    }\n    \n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">newState</span>(<span class="hljs-params">bytes arg</span>) : bytes {\n        <span class="hljs-comment">/*\n          Current pattern            111    110    101    100    011    010    001    000\n          New state for center cell     0     1     1    0     1     1     1     0\n        */</span>\n        bytes a = arg[<span class="hljs-number">0</span> : <span class="hljs-number">1</span>];\n        bytes b = arg[<span class="hljs-number">1</span> : <span class="hljs-number">2</span>];\n        bytes c = arg[<span class="hljs-number">2</span> : <span class="hljs-number">3</span>];\n        bytes res = <span class="hljs-variable constant_">LIVE</span>;\n        <span class="hljs-keyword">if</span> (a == <span class="hljs-variable constant_">LIVE</span> &amp;&amp; b == <span class="hljs-variable constant_">LIVE</span> &amp;&amp; c == <span class="hljs-variable constant_">LIVE</span>) {\n            res = <span class="hljs-variable constant_">DEAD</span>;\n        }\n        <span class="hljs-keyword">if</span> (a == <span class="hljs-variable constant_">LIVE</span> &amp;&amp; b == <span class="hljs-variable constant_">DEAD</span> &amp;&amp; c == <span class="hljs-variable constant_">DEAD</span>) {\n            res = <span class="hljs-variable constant_">DEAD</span>;\n        }\n        <span class="hljs-keyword">if</span> (a == <span class="hljs-variable constant_">DEAD</span> &amp;&amp; b == <span class="hljs-variable constant_">DEAD</span> &amp;&amp; c == <span class="hljs-variable constant_">DEAD</span>) {\n            res = <span class="hljs-variable constant_">DEAD</span>;\n        }\n        <span class="hljs-keyword">return</span> res;\n    }\n}\n</code></pre>\n'})};var is=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Schnoor Signatures",description:"Schnoor Signatures in sCrypt",html:'<p>The <a href="https://en.wikipedia.org/wiki/Schnorr_signature">Schnorr signature algorithm</a> is an alternative algorithm to the ECDSA algorithm currently used for signatures in Bitcoin. One key advantage is that multiple signatures, either in one input or multiple inputs of the same transaction, can be aggregated into a single signature.</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"ec.scrypt"</span>;\n\n\n<span class="hljs-comment">// Schnorr signatures verification for secp256k1</span>\ncontract <span class="hljs-title class_">Schnorr</span> {\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">verify</span>(<span class="hljs-params">Sig sig, PubKey pubKey, bytes msg, int lambda,\n        Point R, PointMulAux rAux,\n        Point E, PointMulAux eAux,\n        Point S, PointMulAux sAux</span>) {\n\n        int r = <span class="hljs-title function_">unpack</span>(sig[ : <span class="hljs-number">32</span>]);\n        int s = <span class="hljs-title function_">unpack</span>(sig[<span class="hljs-number">32</span> : <span class="hljs-number">64</span>]);\n\n        <span class="hljs-comment">// R = r * G</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isMul</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-property">G</span>, r, R, rAux));\n\n        <span class="hljs-comment">// e = Hash(r || P || msg)</span>\n        int e = <span class="hljs-title function_">unpack</span>(<span class="hljs-title function_">sha256</span>(<span class="hljs-title function_">pack</span>(r) + pubKey + msg));\n\n        <span class="hljs-comment">// E = e * P</span>\n        <span class="hljs-title class_">Point</span> P = <span class="hljs-title function_">pubKey2Point</span>(pubKey);\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isMul</span>(P, e, E, eAux));\n\n        <span class="hljs-comment">// S = s * G</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isMul</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-property">G</span>, s, S, sAux));\n\n        <span class="hljs-comment">// S == R + H?</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isSum</span>(R, E, lambda, S));\n    }\n\n    <span class="hljs-comment">// convert public key to a point, assuming it&#x27;s uncompressed</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">pubKey2Point</span>(<span class="hljs-params">PubKey pubKey</span>) : <span class="hljs-title class_">Point</span> {\n        <span class="hljs-built_in">require</span>(pubKey[: <span class="hljs-number">1</span>] == b<span class="hljs-string">&#x27;04&#x27;</span>);\n        <span class="hljs-keyword">return</span> { <span class="hljs-title function_">unpack</span>(pubKey[<span class="hljs-number">1</span> : <span class="hljs-number">33</span>]), <span class="hljs-title function_">unpack</span>(pubKey[<span class="hljs-number">33</span> : <span class="hljs-number">65</span>]) };\n    }\n\n}\n</code></pre>\n'})};var rs=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Scoping",description:"Scoping in sCrypt",html:"<p>Scoping in sCrypt follows the prevailing scoping rules of C99 and Solidity. Outer scope variable is shadowed by the inner scope variable of the same name.</p>\n"})};var os=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Stateful Contract",description:"Stateful contracts in sCrypt",html:'<p>Declare any property that is part of the state with <code>@state</code> decorator. The state property can be used the same way as a regular property.</p>\n<p>In order to presist the state, we need to enforce it in the output of the transaction, that will spend our contract in the future. To achieve that, the spending transaction must pass it&#39;s transaction preimage.</p>\n<pre><code class="language-javascript">contract <span class="hljs-title class_">Counter</span> {\n    @state\n    int counter;\n\n    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">int counter</span>) {\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> = counter;\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">increment</span>(<span class="hljs-params">SigHashPreimage txPreimage, int amount</span>) {\n        <span class="hljs-comment">// Ensure that the passed preimage is correct for this TX.</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimage</span>(txPreimage));\n\n        <span class="hljs-comment">// Mutate state.</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span>++;\n\n        <span class="hljs-comment">// Get this TXs output.</span>\n        bytes outputScript = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n\n        <span class="hljs-comment">// Construct an output from its locking script and satoshi amount.</span>\n        bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(outputScript, amount);\n\n        <span class="hljs-comment">// Ensure that the TX actually contains this exact output.</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(output) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n    }\n}\n</code></pre>\n'})};var hs=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Static Properties and Functions",description:"Static properties and functions in sCrypt",html:'<p>A static property/function can be referenced with contract name as prefix without an instantiated contract, similar to a static function/property in Javascript or C++. A static property/function can also be referenced without the contract prefix, but only in the contract it is defined in.</p>\n<pre><code class="language-javascript">library <span class="hljs-title class_">Foo</span> {\n    <span class="hljs-keyword">static</span> int N = <span class="hljs-number">0</span>;\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">incByN</span>(<span class="hljs-params">int a</span>): int {\n        <span class="hljs-comment">// N is used with and without Foo prefix</span>\n        <span class="hljs-keyword">return</span> a + <span class="hljs-title class_">Foo</span>.<span class="hljs-property">N</span> + N;\n    }\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">double</span>(<span class="hljs-params">int x</span>): int {\n        <span class="hljs-comment">// incByN() is called with prefix and without</span>\n        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">incByN</span>(x) + <span class="hljs-title function_">incByN</span>(x);\n    }\n}\n\ncontract <span class="hljs-title class_">Bar</span> {\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params">int y</span>) {\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">double</span>(<span class="hljs-number">2</span>));\n        <span class="hljs-built_in">require</span>(y == <span class="hljs-title class_">Foo</span>.<span class="hljs-property">N</span>);\n        <span class="hljs-comment">// N cannot be referenced without Foo prefix</span>\n        <span class="hljs-comment">// require(y == N);</span>\n    }\n}\n</code></pre>\n'})};var us=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Struct Types",description:"Struct types in sCrypt",html:'<p>A struct is a collection of variable under a single name.</p>\n<p>Structs can be defined like the following:</p>\n<pre><code class="language-javascript">struct <span class="hljs-title class_">Point</span> {\n  int x;\n  int y;\n}\n\nstruct <span class="hljs-title class_">Line</span> {\n  <span class="hljs-title class_">Point</span> start;\n  <span class="hljs-title class_">Point</span> end;\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Point</span> p = {<span class="hljs-number">10</span>, -<span class="hljs-number">10</span>};\nint x = p.<span class="hljs-property">x</span>;\np.<span class="hljs-property">y</span> = <span class="hljs-number">20</span>;\n\n<span class="hljs-comment">// Define a variable q of type Point, and set members to the same values as those of p</span>\n<span class="hljs-title class_">Point</span> q = p;\n<span class="hljs-built_in">require</span>(p == q); <span class="hljs-comment">// true</span>\n\n<span class="hljs-title class_">Line</span> l = {p, q};\nl.<span class="hljs-property">start</span>.<span class="hljs-property">x</span> = l.<span class="hljs-property">end</span>.<span class="hljs-property">y</span> + <span class="hljs-number">1</span>;\n</code></pre>\n'})};var js=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Tic-Tac-Toe",description:"Tic-Tac-Toe in sCrypt",html:'<p>To initiate a game, Alice and Bob each lock up X amount of bitcoins into a contract UTXO. They take turns to play the game by sending signed transactions interacting with the <a href="https://by-example.scrypt.io/stateful-contract/">stateful contract</a>. If one of them wins, the winner claims the 2X bitcoins. If there is a draw, they take back their bitcoins. </p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"arrayUtil.scrypt"</span>;\n\n\ncontract <span class="hljs-title class_">TicTacToe</span> {\n\n    <span class="hljs-title class_">PubKey</span> alice;\n    <span class="hljs-title class_">PubKey</span> bob;\n\n    @state\n    bool is_alice_turn;\n\n    @state\n    bytes board;\n\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-variable constant_">TURNLEN</span> = <span class="hljs-number">1</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int <span class="hljs-variable constant_">BOARDLEN</span> = <span class="hljs-number">9</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> bytes <span class="hljs-variable constant_">EMPTY</span> = b<span class="hljs-string">&#x27;00&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> bytes <span class="hljs-variable constant_">ALICE</span> = b<span class="hljs-string">&#x27;01&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> bytes <span class="hljs-variable constant_">BOB</span> = b<span class="hljs-string">&#x27;02&#x27;</span>;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">int n, Sig sig, int amount, SigHashPreimage txPreimage</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimage</span>(txPreimage));\n        <span class="hljs-built_in">require</span>(n &gt;= <span class="hljs-number">0</span> &amp;&amp; n &lt; <span class="hljs-variable constant_">BOARDLEN</span>);\n\n        bytes play = <span class="hljs-variable language_">this</span>.<span class="hljs-property">is_alice_turn</span> ? <span class="hljs-variable constant_">ALICE</span> : <span class="hljs-variable constant_">BOB</span>;\n        <span class="hljs-title class_">PubKey</span> player = <span class="hljs-variable language_">this</span>.<span class="hljs-property">is_alice_turn</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">alice</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">bob</span>;\n\n        <span class="hljs-comment">// ensure it&#x27;s player&#x27;s turn</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, player));\n        <span class="hljs-comment">// make the move</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span> = <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">setElemAt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span>, n, play);\n        <span class="hljs-variable language_">this</span>.<span class="hljs-property">is_alice_turn</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">is_alice_turn</span>;\n\n\n        bytes outputs = b<span class="hljs-string">&#x27;&#x27;</span>;\n        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">won</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span>, play)) {\n            <span class="hljs-comment">// winner takes all</span>\n            bytes outputScript = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildPublicKeyHashScript</span>(<span class="hljs-title function_">hash160</span>(player));\n            bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(outputScript, amount);\n            outputs = output;\n        }\n        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">full</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">board</span>)) {\n            <span class="hljs-comment">// draw: equally split, i.e., both outputs have the same amount</span>\n            bytes aliceScript = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildPublicKeyHashScript</span>(<span class="hljs-title function_">hash160</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">alice</span>));\n            bytes aliceOutput = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(aliceScript, amount);\n\n            bytes bobScript = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildPublicKeyHashScript</span>(<span class="hljs-title function_">hash160</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bob</span>));\n            bytes bobOutput = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(bobScript, amount);\n\n            outputs = aliceOutput + bobOutput;\n        }\n        <span class="hljs-keyword">else</span> {\n            <span class="hljs-comment">// update state</span>\n            bytes scriptCode_ = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n            bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(scriptCode_, amount);\n            outputs = output;\n        }\n\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(outputs) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n    }\n\n    <span class="hljs-comment">// does play win after current move?</span>\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">won</span>(<span class="hljs-params">bytes board, bytes play</span>) : bool {\n        <span class="hljs-comment">// three in a row, a column, or a diagnoal</span>\n        int[<span class="hljs-number">8</span>][<span class="hljs-number">3</span>] lines = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>]];\n\n        bool anyLine = <span class="hljs-literal">false</span>;\n        loop (<span class="hljs-number">8</span>) : i {\n            bool line = <span class="hljs-literal">true</span>;\n            loop (<span class="hljs-number">3</span>) : j {\n                line = line &amp;&amp; <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">getElemAt</span>(board, lines[i][j]) == play;\n            }\n\n            anyLine = anyLine || line;\n        }\n\n        <span class="hljs-keyword">return</span> anyLine;\n    }\n\n    <span class="hljs-comment">// is board full?</span>\n    <span class="hljs-keyword">function</span> <span class="hljs-title function_">full</span>(<span class="hljs-params">bytes board</span>) : bool {\n        bool full = <span class="hljs-literal">true</span>;\n\n        loop (<span class="hljs-variable constant_">BOARDLEN</span>) : i {\n            full = full &amp;&amp; <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">getElemAt</span>(board, i) != <span class="hljs-variable constant_">EMPTY</span>;\n        }\n\n        <span class="hljs-keyword">return</span> full;\n    }\n}\n</code></pre>\n'})};var ds=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Turing Machine",description:"Turing Machine in sCrypt",html:'<p>In the example below, we implement a Turing machine for <a href="https://math.stackexchange.com/questions/503853/how-do-you-argue-or-prove-that-a-certain-turing-machine-accepts-a-language">checking balanced parentheses</a>. Its initial state is A and it contains one accepted state. The transition function says, for instance, if the machine is at state A and its head reads symbol \u201c)\u201d, it should write \u201cX\u201d in that cell and move left, transitioning to state B.</p>\n<p>Structs can be defined like the following:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"serializer.scrypt"</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">"arrayUtil.scrypt"</span>;\n\n\n<span class="hljs-comment">// Turing machine state</span>\ntype <span class="hljs-title class_">State</span> = bytes;\n<span class="hljs-comment">// alphabet symbol in each cell, 1 byte long each</span>\ntype <span class="hljs-title class_">Symbol</span> = bytes;\n\n<span class="hljs-comment">// contract state as a struct</span>\nstruct <span class="hljs-title class_">StateStruct</span> {\n    int headPos;\n    bytes tape;\n    <span class="hljs-comment">// current machine state</span>\n    <span class="hljs-title class_">State</span> curState;\n}\n\nstruct <span class="hljs-title class_">Input</span> {\n    <span class="hljs-title class_">State</span> oldState;\n    <span class="hljs-title class_">Symbol</span> read;\n}\n\nstruct <span class="hljs-title class_">Output</span> {\n    <span class="hljs-title class_">State</span> newState;\n    <span class="hljs-title class_">Symbol</span> write;\n    <span class="hljs-comment">// move left or right</span>\n    bool moveLeft;\n}\n\n<span class="hljs-comment">// transition function entry: input -&gt; output</span>\nstruct <span class="hljs-title class_">TransitionFuncEntry</span> {\n    <span class="hljs-title class_">Input</span> input;\n    <span class="hljs-title class_">Output</span> output;\n}\n\n<span class="hljs-comment">/*\n * A Turing Machine checking balanced parentheses\n */</span>\ncontract <span class="hljs-title class_">TuringMachine</span> {\n\n    @state\n    <span class="hljs-title class_">StateStruct</span> states;\n    <span class="hljs-comment">// states</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">State</span> <span class="hljs-variable constant_">STATE_A</span> = b<span class="hljs-string">&#x27;00&#x27;</span>; <span class="hljs-comment">// initial state</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">State</span> <span class="hljs-variable constant_">STATE_B</span> = b<span class="hljs-string">&#x27;01&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">State</span> <span class="hljs-variable constant_">STATE_C</span> = b<span class="hljs-string">&#x27;02&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">State</span> <span class="hljs-variable constant_">STATE_ACCEPT</span> = b<span class="hljs-string">&#x27;03&#x27;</span>;\n\n    <span class="hljs-comment">// symbols</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Symbol</span> <span class="hljs-variable constant_">BLANK</span> = b<span class="hljs-string">&#x27;00&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Symbol</span> <span class="hljs-variable constant_">OPEN</span> = b<span class="hljs-string">&#x27;01&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Symbol</span> <span class="hljs-variable constant_">CLOSE</span> = b<span class="hljs-string">&#x27;02&#x27;</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Symbol</span> X = b<span class="hljs-string">&#x27;03&#x27;</span>;\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> bool <span class="hljs-variable constant_">LEFT</span> = <span class="hljs-literal">true</span>;\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> bool <span class="hljs-variable constant_">RIGHT</span> = <span class="hljs-literal">false</span>;\n\n    <span class="hljs-comment">// number of rules in the transition function</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> int N = <span class="hljs-number">8</span>;\n    <span class="hljs-comment">// transition function table</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">TransitionFuncEntry</span>[N] transitionFuncTable = [\n        ,\n        ,\n        ,\n        ,\n        \n        ,\n        ,\n\n        ,\n        \n    ];\n    \n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">transit</span>(<span class="hljs-params">SigHashPreimage txPreimage</span>) {\n        <span class="hljs-comment">// read/deserialize contract state</span>\n        <span class="hljs-title class_">SigHashType</span> sigHashType = <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ANYONECANPAY</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">SINGLE</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">FORKID</span>;\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimageSigHashType</span>(txPreimage, sigHashType));\n        <span class="hljs-comment">// transition</span>\n        <span class="hljs-title class_">Symbol</span> head = <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">getElemAt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span>);\n        <span class="hljs-comment">// look up in transition table</span>\n        bool found = <span class="hljs-literal">false</span>;\n        loop (N) : i {\n            <span class="hljs-keyword">if</span> (!found) {\n                auto entry = transitionFuncTable[i];\n                <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">input</span> == { <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">curState</span>, head }) {\n                    auto output = entry.<span class="hljs-property">output</span>;\n                    <span class="hljs-comment">// update state</span>\n                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">curState</span> = output.<span class="hljs-property">newState</span>;\n                    <span class="hljs-comment">// write tape head</span>\n                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span> = <span class="hljs-title class_">ArrayUtil</span>.<span class="hljs-title function_">setElemAt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span>, output.<span class="hljs-property">write</span>);\n                    <span class="hljs-comment">// move head</span>\n                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span> += output.<span class="hljs-property">moveLeft</span> ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;\n                    <span class="hljs-comment">// extend tape if out of bound</span>\n                    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span> &lt; <span class="hljs-number">0</span>) {\n                        <span class="hljs-comment">// add 1 blank cell to the left</span>\n                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span> = <span class="hljs-variable constant_">BLANK</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span>;\n                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span> = <span class="hljs-number">0</span>;\n                    }\n                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">headPos</span> &gt;= <span class="hljs-title function_">len</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span>)) {\n                        <span class="hljs-comment">// add 1 blank cell to the right</span>\n                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">tape</span> + <span class="hljs-variable constant_">BLANK</span>;\n                    }\n\n                    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-property">curState</span> == <span class="hljs-variable constant_">STATE_ACCEPT</span>) {\n                        <span class="hljs-comment">// accept</span>\n                        <span class="hljs-title function_">exit</span>(<span class="hljs-literal">true</span>);\n                    }\n\n                    found = <span class="hljs-literal">true</span>;\n                }\n            }\n        }\n        <span class="hljs-comment">// reject if no transition rule found</span>\n        <span class="hljs-built_in">require</span>(found);\n\n        <span class="hljs-comment">// otherwise machine goes to the next step</span>\n        bytes stateScript = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateScript</span>();\n        bytes output = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">buildOutput</span>(stateScript, <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">value</span>(txPreimage));\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash256</span>(output) == <span class="hljs-title class_">SigHash</span>.<span class="hljs-title function_">hashOutputs</span>(txPreimage));\n\n    }\n}\n</code></pre>\n'})};var bs=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Type Aliases",description:"Type aliases in sCrypt",html:'<p>Type aliases create a new name for a type. It does not actually create a new type, it merely creates a new name to refer to that type.</p>\n<pre><code class="language-javascript">type <span class="hljs-title class_">Age</span> = int;\ntype <span class="hljs-title class_">Coordinate</span> = int[<span class="hljs-number">2</span>];\n</code></pre>\n<p>They can also be used for struct types.</p>\n<p>Struct definition:</p>\n<pre><code class="language-javascript">struct <span class="hljs-title class_">Point</span> {\n  int x;\n  int y;\n}\n</code></pre>\n<p>Creating an alias for the defined struct:</p>\n<pre><code class="language-javascript">type <span class="hljs-title class_">Coordinate</span> = <span class="hljs-title class_">Point</span>;\n</code></pre>\n'})};var ms=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Type Inference",description:"Type inference in sCrypt",html:'<p>The <code>auto</code> keyword specifies that the type of the variable, of basic type, declared will be automatically deducted from its initializer.</p>\n<pre><code class="language-javascript">auto a1 = b<span class="hljs-string">&#x27;36&#x27;</span>;      <span class="hljs-comment">// bytes</span>\nauto a2 = <span class="hljs-number">1</span> + <span class="hljs-number">5</span> * <span class="hljs-number">3</span>;  <span class="hljs-comment">// int</span>\n</code></pre>\n'})};var ys=function(){return Object(c.jsx)(K,{version:"0.1.0",title:"Outsourcing Vanity Address Generation",description:"Outsourcing vanity address generation in sCrypt",html:'<p>In order to outsource the generation of a desired vanity address, say with the prefix <code>1Love</code>, we generate a key pair <strong>p</strong>, <strong>P</strong>.\nWe then share <strong>P</strong> with the seller, who will find the public key of our final vanity address. He will then go through many values of a partial private key <strong>x</strong>, until <strong>P + x*G</strong> yields a public key <strong>P&#39;</strong>, the address of which will contain our desired prefix. He then shares this key <em>x</em>, so we can assemble the private key of <strong>P&#39;</strong>, by calculating <strong>k = (p + x) * G</strong>.</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">"ec.scrypt"</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">"util.scrypt"</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">"base58.scrypt"</span>;\n\n\ncontract <span class="hljs-title class_">VanityAddr</span> {\n\n    <span class="hljs-title class_">PubKey</span> P;\n    bytes pattern;\n    <span class="hljs-title class_">Ripemd160</span> cancelPubKeyHash;\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancel</span>(<span class="hljs-params">Sig sig, PubKey pubKey</span>) {\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">hash160</span>(pubKey) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelPubKeyHash</span>);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">checkSig</span>(sig, pubKey));\n    }\n\n    public <span class="hljs-keyword">function</span> <span class="hljs-title function_">offerVanityAddr</span>(<span class="hljs-params">PrivKey x,\n                                    PubKey X,\n                                    PubKey derP,\n                                    int lambda,\n                                    SigHashPreimage txPreimage</span>) {\n        <span class="hljs-comment">// Check if x is private key of X.</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-title class_">Tx</span>.<span class="hljs-title function_">checkPreimageAdvanced</span>(txPreimage, x, X, <span class="hljs-title class_">Tx</span>.<span class="hljs-property">invK</span>, <span class="hljs-title class_">Tx</span>.<span class="hljs-property">r</span>, <span class="hljs-title class_">Tx</span>.<span class="hljs-property">rBigEndian</span>, <span class="hljs-title class_">SigHashType</span>(<span class="hljs-title class_">SigHash</span>.<span class="hljs-property">ALL</span> | <span class="hljs-title class_">SigHash</span>.<span class="hljs-property">FORKID</span>)));\n\n        <span class="hljs-comment">// Check if P&#x27; = P + X.</span>\n        <span class="hljs-built_in">require</span>(<span class="hljs-variable constant_">EC</span>.<span class="hljs-title function_">isPubKeySum</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">P</span>, X, lambda, derivedPubKey));\n\n        <span class="hljs-comment">// Check if P&#x27; produces desired address.</span>\n        <span class="hljs-title class_">PubKey</span> derivedPubKeyCompressed = <span class="hljs-title function_">compressPubKey</span>(derivedPubKey);\n        <span class="hljs-built_in">require</span>(<span class="hljs-title function_">matchPattern</span>(derivedPubKeyCompressed, <span class="hljs-variable language_">this</span>.<span class="hljs-property">pattern</span>));\n    }\n\n    <span class="hljs-comment">// Check if public key&#x27;s address matches the given pattern.</span>\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">matchPattern</span>(<span class="hljs-params">PubKey pubKey, bytes pattern</span>) : bool {\n        <span class="hljs-comment">// Derive the address.</span>\n        bytes addr = <span class="hljs-title function_">hash160</span>(pubKey);\n\n        <span class="hljs-comment">// Encode to base58check.</span>\n        bytes addrB58 = <span class="hljs-title class_">Base58</span>.<span class="hljs-title function_">base58EncodeCheckAddr</span>(addr, <span class="hljs-title class_">Base58</span>.<span class="hljs-property">P2PKH_verbyte_mainnet</span>);\n\n        <span class="hljs-comment">// Prefix match.</span>\n        int l = <span class="hljs-title function_">len</span>(pattern);\n        <span class="hljs-keyword">return</span> addrB58[:l] == pattern;\n    }\n\n    <span class="hljs-keyword">static</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">compressPubKey</span>(<span class="hljs-params">PubKey pk</span>) : <span class="hljs-title class_">PubKey</span> {\n        <span class="hljs-comment">// Check if y-coord is even or odd</span>\n        bool isEven = (pk[<span class="hljs-number">63</span>:<span class="hljs-number">64</span>] &amp; b<span class="hljs-string">&#x27;01&#x27;</span>) != b<span class="hljs-string">&#x27;01&#x27;</span>;\n\n        bytes prefix = isEven ? b<span class="hljs-string">&#x27;02&#x27;</span> : b<span class="hljs-string">&#x27;03&#x27;</span>;\n        <span class="hljs-keyword">return</span> <span class="hljs-title class_">PubKey</span>(prefix + pk[<span class="hljs-number">1</span>:<span class="hljs-number">33</span>]);\n    }\n}\n</code></pre>\n'})},gs=n(9),fs=n.n(gs),_s=n.p+"static/media/youtube.350d8f8f.svg",vs=[{title:"",routes:[{path:"hello-world",title:"Hello World"},{path:"constructor",title:"Constructor"},{path:"require",title:"Require"},{path:"basic-types",title:"Basic Types"},{path:"array-types",title:"Array Types"},{path:"struct-types",title:"Struct Types"},{path:"type-inference",title:"Type Inference"},{path:"type-aliases",title:"Type Aliases"},{path:"generics",title:"Generics"},{path:"const-variables",title:"Const Variables"},{path:"if-else",title:"If / Else"},{path:"public-function",title:"Public Function"},{path:"contract-private-functions",title:"Functions"},{path:"exit",title:"Exit"},{path:"access-modifiers",title:"Access Modifiers"},{path:"operators",title:"Operators"},{path:"scoping",title:"Scoping"},{path:"static",title:"Static"},{path:"loop",title:"Loop"},{path:"library",title:"Library"},{path:"import",title:"Import"},{path:"stateful-contract",title:"Stateful Contract"},{path:"inline-assembly",title:"Inline Assembly"}]},{title:"Applications",routes:[{path:"p2pkh",title:"Pay to Public Key Hash (P2PKH)"},{path:"r-puzzle",title:"R-Puzzle"},{path:"rabin-signature",title:"Rabin Signature"},{path:"schnoor-signature",title:"Schnoor Signatures"},{path:"multiparty-hash-puzzles",title:"Multiparty Hash Puzzles"},{path:"ecdsa-oracles",title:"ECDSA-based Oracles"},{path:"vanity-address",title:"Trustless Outsourced Vanity Address Generation"},{path:"auction",title:"Auctions"},{path:"cointoss",title:"Fair Coin Toss"},{path:"tic-tac-toe",title:"Tic-Tac-Toe"},{path:"rule110",title:"Rule 110"},{path:"gol",title:"Conways Game of Life"},{path:"turing-machine",title:"Turing Machine"}]}],xs=[""];var ws=[{path:"/access-modifiers",component:q},{path:"/array-types",component:L},{path:"/auction",component:I},{path:"/basic-types",component:B},{path:"/code-seperator",component:D},{path:"/cointoss",component:R},{path:"/const-variables",component:F},{path:"/constructor",component:z},{path:"/contract-private-functions",component:G},{path:"/ecdsa-oracles",component:U},{path:"/exit",component:M},{path:"/generics",component:X},{path:"/gol",component:Y},{path:"/hello-world",component:V},{path:"/if-else",component:W},{path:"/import",component:Z},{path:"/inline-assembly",component:J},{path:"/library",component:Q},{path:"/loop",component:$},{path:"/multiparty-hash-puzzles",component:ss},{path:"/operators",component:as},{path:"/p2pkh",component:ns},{path:"/public-function",component:ts},{path:"/r-puzzle",component:es},{path:"/rabin-signature",component:ls},{path:"/require",component:ps},{path:"/rule110",component:cs},{path:"/schnoor-signature",component:is},{path:"/scoping",component:rs},{path:"/stateful-contract",component:os},{path:"/static",component:hs},{path:"/struct-types",component:us},{path:"/tic-tac-toe",component:js},{path:"/turing-machine",component:ds},{path:"/type-aliases",component:bs},{path:"/type-inference",component:ms},{path:"/vanity-address",component:ys},{path:"",component:function(){return Object(c.jsxs)("div",{className:fs.a.component,children:[Object(c.jsx)(T,{title:"sCrypt by Example",description:"Learn smart contract programming using sCrypt"}),Object(c.jsx)("h1",{className:fs.a.header,children:Object(c.jsx)("a",{href:"/",children:"sCrypt by Example"})}),Object(c.jsx)("div",{className:fs.a.subHeader}),Object(c.jsxs)("div",{className:fs.a.main,children:[Object(c.jsxs)("p",{children:["An introduction to ",Object(c.jsx)("a",{href:"https://scrypt.io/",children:"sCrypt"})," with simple examples."]}),Object(c.jsxs)("div",{className:fs.a.youTube,children:[Object(c.jsx)("img",{src:_s,alt:"logo",className:fs.a.youTubeLogo}),Object(c.jsx)("a",{href:"https://www.youtube.com/watch?v=xPfCM6gBl-Y&list=PL0Kn1t30VSpG4Fu2ze81uDptBd1ZML99A",target:"__blank",children:"Learning sCrypt video playlist."})]}),Object(c.jsx)("div",{className:fs.a.updates,children:xs.map((function(s,a){return Object(c.jsx)("div",{children:s},a)}))}),vs.map((function(s,a){var n=s.routes,t=s.title;return Object(c.jsxs)("div",{children:[t&&Object(c.jsx)("h3",{className:fs.a.category,children:t}),Object(c.jsx)("ul",{className:fs.a.list,children:n.map((function(s){var a=s.path,n=s.title;return Object(c.jsx)("li",{className:fs.a.listItem,children:Object(c.jsx)("a",{href:a,children:n})},a)}))})]},a)}))]})]})}}];var ks=function(){var s=o(),a=s.state,n=s.loadLocalStorage;return Object(t.useEffect)((function(){n()}),[]),a.loading?null:Object(c.jsx)(u.a,{basename:"",children:Object(c.jsxs)("div",{className:b.a.component,children:[Object(c.jsx)(v,{}),Object(c.jsx)("div",{className:b.a.main,children:Object(c.jsx)(j.c,{children:ws.map((function(s){return Object(c.jsx)(j.a,{path:s.path,exact:!0,component:s.component},s.path)}))})}),Object(c.jsx)("div",{className:b.a.footer,children:Object(c.jsx)(A,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ss=document.getElementById("root");Ss.hasChildNodes()?Object(e.hydrate)(Object(c.jsx)(h,{children:Object(c.jsx)(ks,{})}),Ss):Object(e.render)(Object(c.jsx)(h,{children:Object(c.jsx)(ks,{})}),Ss),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(s){s.unregister()})).catch((function(s){console.error(s.message)}))},5:function(s,a,n){s.exports={component:"Footer_component__2wm-B",row:"Footer_row__3cluQ",bar:"Footer_bar__93usQ",khan:"Footer_khan__3lTcL",social:"Footer_social__2zV0n",scrypt:"Footer_scrypt__l_4AP",telegram:"Footer_telegram__24TIZ",discord:"Footer_discord__3WEtR",youTube:"Footer_youTube__aIeLj",slack:"Footer_slack__1g_De",github:"Footer_github__dwe1R",medium:"Footer_medium__3xje4"}},9:function(s,a,n){s.exports={component:"pages_component__1bqIE",updates:"pages_updates__3xY-4",category:"pages_category__4oGsu",listItem:"pages_listItem__1RzOh",label:"pages_label__i9P1V",header:"pages_header__o5uPl",youTube:"pages_youTube__3ueeo",youTubeLogo:"pages_youTubeLogo__3p01g"}}},[[38,1,2]]]);
//# sourceMappingURL=main.a5845a55.chunk.js.map